From 984d835b014cff34b7bf2cb7f487df595b890718 Mon Sep 17 00:00:00 2001
From: Thomas Perl <m@thp.io>
Date: Fri, 16 Jan 2015 09:47:03 +0100
Subject: [PATCH 51/65] Fix SIGFPE when no packages are installed

---
 backends/zypp/pk-backend-zypp.cpp | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/backends/zypp/pk-backend-zypp.cpp b/backends/zypp/pk-backend-zypp.cpp
index 265a398cf..552baffa5 100644
--- a/backends/zypp/pk-backend-zypp.cpp
+++ b/backends/zypp/pk-backend-zypp.cpp
@@ -751,7 +751,10 @@ struct ExecCounters {
 			current = total;
 		}
 
-		int percentage = 100 * current / total;
+		int percentage = -1;
+		if (total != 0) {
+			percentage = 100 * current / total;
+		}
 
 		if (last_percentage > percentage) {
 			/**
-- 
2.13.5

