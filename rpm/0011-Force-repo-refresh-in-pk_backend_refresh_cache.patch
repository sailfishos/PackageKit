From 7b091ceea944d7a0da34a3a5925ad6c26f527b7d Mon Sep 17 00:00:00 2001
From: Pekka Vuorela <pekka.vuorela@jollamobile.com>
Date: Fri, 13 Oct 2017 14:23:12 +0300
Subject: [PATCH 11/38] Force repo refresh in pk_backend_refresh_cache

This is in line with what most other backends do: When a refresh
of the cache is requested, we want to force a cache update. The
command-line "pkcon" client doesn't provide a way to set force.

[backends] zypp: Force repository refresh
---
 backends/zypp/pk-backend-zypp.cpp | 7 +------
 1 file changed, 1 insertion(+), 6 deletions(-)

diff --git a/backends/zypp/pk-backend-zypp.cpp b/backends/zypp/pk-backend-zypp.cpp
index 7dbf6d158..4d01e6e16 100644
--- a/backends/zypp/pk-backend-zypp.cpp
+++ b/backends/zypp/pk-backend-zypp.cpp
@@ -2213,11 +2213,6 @@ pk_backend_get_distro_upgrades (PkBackend *backend, PkBackendJob *job)
 static void
 backend_refresh_cache_thread (PkBackendJob *job, GVariant *params, gpointer user_data)
 {
-	gboolean force;
-	g_variant_get (params, "(b)",
-		       &force);
-
-	MIL << force << endl;
 	ZyppJob zjob(job);
 	ZYpp::Ptr zypp = zjob.get_zypp();
 
@@ -2225,7 +2220,7 @@ backend_refresh_cache_thread (PkBackendJob *job, GVariant *params, gpointer user
 		return;
 	}
 
-	zypp_refresh_cache (job, zypp, force);
+	zypp_refresh_cache (job, zypp, TRUE);
 }
 
 /**
-- 
2.13.6

