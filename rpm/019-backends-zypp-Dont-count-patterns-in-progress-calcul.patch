From b2e637544bb5f64d4fa0bbce32c2d0bcd1c91590 Mon, 10 Oct 2016 15:52:12 +0200
From: Thomas Perl <thomas.perl@jollamobile.com>
Date: Mon, 14 Oct 2013 02:51:06 +0200
Subject: [PATCH] [backends] zypp: Don't count patterns in progress calculation


Patterns are not downloaded or installed, they just refer to other
packages as dependencies to be pulled in. When calculating the number
of packages to be downloaded and installed, skip patterns.

diff --git a/backends/zypp/pk-backend-zypp.cpp b/backends/zypp/pk-backend-zypp.cpp
index ea2f45c..f88962b 100644
--- a/backends/zypp/pk-backend-zypp.cpp
+++ b/backends/zypp/pk-backend-zypp.cpp
@@ -1636,6 +1636,11 @@
 		// Get number of installations and removals for overall progress
 		priv->exec.reset();
 		for (ResPool::const_iterator it = pool.begin (); it != pool.end (); ++it) {
+			// Patterns are not "installed" or "downloaded" as such
+			if (it->satSolvable().kind() == ResKind::pattern) {
+				continue;
+			}
+
 			if (it->status().isToBeInstalled()) {
 				if (!only_download) {
 					priv->exec.total_installs += 1;
