From e203d8ed08cfc9f6133a8837351abcfb5dbb50ac Mon Sep 17 00:00:00 2001
From: Thomas Perl <thomas.perl@jollamobile.com>
Date: Mon, 19 Aug 2013 12:09:42 +0200
Subject: [PATCH 09/65] zypp Backend: Close PackageKit job when upgrade fails

---
 backends/zypp/pk-backend-zypp.cpp | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/backends/zypp/pk-backend-zypp.cpp b/backends/zypp/pk-backend-zypp.cpp
index bdff077d5..b7eb695bc 100644
--- a/backends/zypp/pk-backend-zypp.cpp
+++ b/backends/zypp/pk-backend-zypp.cpp
@@ -3813,7 +3813,7 @@ backend_upgrade_system_thread (PkBackendJob *job, GVariant *params, gpointer use
 		ResPool pool = zypp_build_pool (zypp, TRUE);
 
 		if (!zypp_perform_execution (job, zypp, UPGRADE, TRUE, transaction_flags)) {
-			return;
+			MIL << "Upgrade execution failed" << std::endl;
 		}
 	} catch (const Exception &ex) {
 		zypp_backend_finished_error (job,
-- 
2.13.5

